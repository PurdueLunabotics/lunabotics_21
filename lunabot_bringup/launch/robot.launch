<?xml version="1.0"?>
<launch>
    <arg name="record" default="false" />
    <arg name="teensy" default="true" />
    <arg name="cameras" default="true" />
    <arg name="manual" default="true" />
    <arg name="overhead" default="false" />
    <arg name="slam" default="false" />

    <include if="$(arg overhead)" file="$(find lunabot_bringup)/launch/overhead.launch" />
    <include if="$(arg manual)" file="$(find lunabot_control)/launch/manual_control.launch" />
    <machine name="jetson" address="192.168.0.101" env-loader="~/lunabot_env.sh" default="true"/>
    <node if="$(arg teensy)" machine="jetson" name="teensy_main" ns="teensy_main" pkg="rosserial_python" type="serial_node.py" output="screen">
        <param name="port" type="string" value="/dev/ttyACM0"/>
        <param name="baud" type="string" value="9600"/>
    </node>
    <include if="$(arg cameras)" file="$(find lunabot_perception)/launch/cameras.launch" >
      <arg name="back" value="false"/>
    </include>

    <include if="$(arg slam)" file="$(find rtabmap_ros)/launch/rtabmap.launch" >
      <arg name="rtabmap_args" value="--delete_db_on_start"/>
      <arg name="depth_topic" value="/d455_front/camera/aligned_depth_to_color/image_raw"/>
      <arg name="rgb_topic" value="/d455_front/camera/color/image_rect_color"/>
      <arg name="camera_info_topic" value="/d455_front/camera/color/camera_info"/>
      <arg name="approx_sync" value="false"/>
      <arg name="rtabmapviz" value="false" />
      <arg name="frame_id" value="d455_front_link" />
    </include>
</launch>
