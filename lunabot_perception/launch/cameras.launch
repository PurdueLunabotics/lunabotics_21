<launch>
  <arg name="sim"                           default="false"/>

  <include file="$(find lunabot_perception)/launch/t265.launch" unless="$(arg sim)"/>

  <include file="$(find timed_roslaunch)/launch/timed_roslaunch.launch" unless="$(arg sim)">
    <arg name="time" value="2" />
    <arg name="pkg" value="lunabot_perception" />
    <arg name="file" value="d435.launch" />
  </include> 

  <!-- Simulator cameras -->

  <group ns="d435_forward/color" if="$(arg sim)">
    <node pkg="image_proc" type="image_proc" name="image_proc"/>
    <include file="$(find lunabot_perception)/launch/apriltag.launch">
      <arg name="camera_frame" value="d435_forward_link" />
    </include>
  </group>

  <group ns="d435_backward/color" if="$(arg sim)">
    <node pkg="image_proc" type="image_proc" name="image_proc"/>
    <include file="$(find lunabot_perception)/launch/apriltag.launch">
      <arg name="camera_frame" value="d435_backward_link" />
    </include>
  </group>
</launch>